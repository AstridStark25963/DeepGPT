<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepGPT AI 对话</title>
    <!-- 强制不缓存 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <!-- 注意这里加了 ?t=... -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}?t={{ range(1, 10000) | random }}">
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <button id="newChatBtn" class="new-chat-btn"><span>+</span> 新建对话</button>
        </div>
        <div class="history-list" id="historyList"></div>
        <div class="sidebar-footer">
            <div class="status-indicator" id="statusIndicator"></div>
            <span>服务状态</span>
        </div>
    </div>

    <div class="main-content">
        <div class="chat-header">
            <div class="header-info">
                <h1 id="currentChatTitle">DeepGPT</h1>
                <div class="model-selector" id="modelSelector">
                    <!-- 确保 data-model 属性准确无误 -->
                    <div class="model-option active" data-model="deepseek">DeepSeek</div>
                    <div class="model-option" data-model="qwen">千问</div>
                    <div class="model-option" data-model="kimi">KIMI</div>
                </div>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h3>👋 欢迎使用 DeepGPT</h3>
                <p>选择模型，开始新的对话。</p>
            </div>
        </div>
        
        <div class="chat-input-area">
            <div class="input-wrapper">
                <textarea id="messageInput" placeholder="输入消息..." rows="1"></textarea>
                <button id="sendButton" class="send-button">🚀</button>
            </div>
        </div>
    </div>

    <!-- 强制不缓存 JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}?t={{ range(1, 10000) | random }}"></script>
</body>
</html>